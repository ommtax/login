<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Password to Open Link (SHA-256 check)</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 2rem; }
    .box { max-width: 420px; }
    input[type="password"] { width: 100%; padding: 8px; margin-bottom: 8px; }
    button { padding: 8px 12px; }
    .msg { margin-top: 8px; color: #c00; }
  </style>
</head>
<body>
  <div class="box">
    <h3>Enter password to open link</h3>
    <input id="pwd" type="password" placeholder="Password">
    <div>
      <button id="openBtn">Open Link</button>
      <button id="openNewBtn">Open in new tab</button>
    </div>
    <div class="msg" id="msg"></div>
  </div>

  <script>
    // CHANGE THESE:
    // Precomputed SHA-256 hash (hex) of the real password.
    // Example: for password "letmein" SHA-256 hex is:
    // 5f4dcc3b5aa765d61d8327deb882cf99...  <-- NOTE: this is NOT the real hash for letmein; compute your own
    const TARGET_HASH_HEX = '3e2d9f7b5d5bb0f8e7f3a6c5a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b'; // replace
    const TARGET_URL = 'https://example.com/secret';

    function hex(buffer) {
      return Array.from(new Uint8Array(buffer)).map(b => b.toString(16).padStart(2,'0')).join('');
    }

    async function sha256Hex(message) {
      const enc = new TextEncoder();
      const data = enc.encode(message);
      const hashBuffer = await crypto.subtle.digest('SHA-256', data);
      return hex(hashBuffer);
    }

    async function openIfCorrect(openInNewTab=false) {
      const pwd = document.getElementById('pwd').value;
      document.getElementById('msg').textContent = '';
      if (!pwd) { document.getElementById('msg').textContent = 'Enter a password.'; return; }

      try {
        const h = await sha256Hex(pwd);
        if (h === TARGET_HASH_HEX) {
          if (openInNewTab) window.open(TARGET_URL, '_blank');
          else window.location.href = TARGET_URL;
        } else {
          document.getElementById('msg').textContent = 'Incorrect password.';
        }
      } catch (err) {
        document.getElementById('msg').textContent = 'Error computing hash.';
        console.error(err);
      }
    }

    document.getElementById('openBtn').addEventListener('click', () => openIfCorrect(false));
    document.getElementById('openNewBtn').addEventListener('click', () => openIfCorrect(true));
    document.getElementById('pwd').addEventListener('keydown', e => {
      if (e.key === 'Enter') openIfCorrect(false);
    });
  </script>
</body>
</html>
